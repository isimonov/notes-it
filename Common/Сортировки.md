
# Сложность и выбор алгоритма

Алгоритм выбирается исходя от контекста, а именно характеристик набора сортируемых данных. **N log(n)** - это максимум как быстро можно отсортировать массив и стабильность достижения этой скорости определяет качество и скорость алгоритма.

# Сортировка пузырьком / Bubble sort

Будем идти по массиву слева направо. Если текущий элемент больше следующего, меняем их местами. Делаем так, пока массив не будет отсортирован. Заметим, что после первой итерации самый большой элемент будет находиться в конце массива, на правильном месте. После двух итераций на правильном месте будут стоять два наибольших элемента, и так далее. Очевидно, не более чем после n итераций массив будет отсортирован. Таким образом, асимптотика в худшем и среднем случае – O(n2), в лучшем случае – O(n).

# Быстрая сортировка / Quicksort

Выберем некоторый опорный элемент. После этого перекинем все элементы, меньшие его, налево, а большие – направо. Рекурсивно вызовемся от каждой из частей. В итоге получим отсортированный массив, так как каждый элемент меньше опорного стоял раньше каждого большего опорного. Асимптотика: O(nlogn) в среднем и лучшем случае, O(n2).

# Dual-Pivot Quicksort - the best!

Тоже, что и быстрая сортировка, но в алгоритме используются два основания. Одна из самых эффективных сортировок. На 20% меньше перемещений элементов, чем в быстрой сортировке. Изначально в Java по умолчанию использовался Quicksort. С ноября 2009 года в JDK 7 по умолчанию используется Dual-Pivot Quicksort. Автор **Владимир Ярославский**. Конференция Dump Spb 2024.

# Сортировка слиянием / Merge sort

Сортировка, основанная на парадигме «разделяй и властвуй». Разделим массив пополам, рекурсивно отсортируем части, после чего выполним процедуру слияния: поддерживаем два указателя, один на текущий элемент первой части, второй – на текущий элемент второй части. Из этих двух элементов выбираем минимальный, вставляем в ответ и сдвигаем указатель, соответствующий минимуму. Слияние работает за O(n), уровней всего logn, поэтому асимптотика O(nlogn). Эффективно заранее создать временный массив и передать его в качестве аргумента функции. Эта сортировка рекурсивна, как и быстрая, а потому возможен переход на квадратичную при небольшом числе элементов.

# Timsort - the best!

Гибридная сортировка, совмещающая сортировку вставками и сортировку слиянием. Разобьем элементы массива на несколько подмассивов небольшого размера, при этом будем расширять подмассив, пока элементы в нем отсортированы. Отсортируем подмассивы сортировкой вставками, пользуясь тем, что она эффективно работает на отсортированных массивах. Далее будем сливать подмассивы как в сортировке слиянием, беря их примерно равного размера (иначе время работы приблизится к квадратичному). Для этого удобного хранить подмассивы в стеке, поддерживая инвариант — чем дальше от вершины, тем больше размер, и сливать подмассивы на верхушке только тогда, когда размер третьего по отдаленности от вершины подмассива больше или равен сумме их размеров. Асимптотика: O(n) в лучшем случае и O(nlogn) в среднем и худшем случае.

# Пирамидальная сортировка / Heapsort

Развитие идеи сортировки выбором. Воспользуемся структурой данных «куча» (или «пирамида», откуда и название алгоритма). Она позволяет получать минимум за O(1), добавляя элементы и извлекая минимум за O(logn). Таким образом, асимптотика O(nlogn) в худшем, среднем и лучшем случае.

# Java

Использование алгоритма сортировки в Java  в зависимости от окружения. Из доклада с Dump Spb, Владимира Ярославского, автора Dual-Pivot Quicksort.

| **Окружение**                    | **Алгоритм**                          |
| -------------------------------- | ------------------------------------- |
| Небольшие массивы                | Комбинированная сортировка вставками  |
| Массивы byte, char, short        | Сортировка подсчётом (линейное время) |
| Повторяющиеся данные             | Классический Quicksort (DNF)          |
| Упорядоченные последовательности | Проверка за линейное время            |
| Почти упорядоченные массивы      | Merge sort                            |
| Вещественные числа               | Дополнительная обработка -0.0 и NaN   |
| Опорные элементы                 | Сеть сортировки                       |
| "Killer" массив                  | Пирамидальная сортировка / Heapsort   |
| Многопроцессорная среда          | Сортировка слиянием / Merge sort      |
| Большие массивы случайных чисел  | Поразрядная сортировка / Radix sort   |
| Остальные массивы                | Dual-Pivot Quicksort                  |

Выбор функции сортировки массива в Java:
- Arrays.sort(a) - в однопоточной среде
- Arrays.parallelSort(a) - в многопоточной среде, самый правильный выбор