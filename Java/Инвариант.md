# В математике

Инвариант в математике - выражение, величина или некоторое свойство, которое не меняется при заданных преобразованиях.

## Пример

На доске написаны шесть чисел: 1, 2, 3, 4, 5, 6. За один ход разрешается к любым двум из них одновременно добавлять по единице. Можно ли за несколько ходов все числа сделать равными?

## Решение

Сумма написанных чисел нечетна (она равна 21). За каждый ход эта сумма увеличивается на 2, т. е. всегда остается нечетной. А сумма шести равных чисел всегда четна. Это значит, что сделать числа равными невозможно.

**Ответ.** Нельзя.

# В ООП

Инвариант в объектно-ориентированном программировании - выражение, определяющее непротиворечивое внутреннее состояние объекта.

Инварианты в коде обычно выглядят:

- Как транзакции - какие то изменения, которые либо прошли целиком, либо целиком откатились.
- Как валидации перед сохранением - которые либо дали сохранить изменения, либо упали с ошибкой о некорректном состоянии.
- В целом, любое исключение может оказаться следствием поддержки инварианта - обеспечение целостности, частный случай - ObjectDisposedException.
- Функциональные программы часто инвариантны, т.к. не меняют состояние исходного объекта.
- Приватные поля объекта, которые может менять только сам объект, плюс каждый публичный метод меняет их из рабочего и согласованного состояния в рабочее и согласованное состояние.